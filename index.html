<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ëœë¤ ë²ˆí˜¸ ì¶”ì²¨ê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <style>
    * { box-sizing: border-box; }
   
    html, body {
      height: 100%;
      overflow-x: hidden;
    }
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      width: 100%;
      max-width: 100vw;
      background-image: url('ë¡œë˜ë°°ê²½3.png');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center center;
      /* Safe Area ì§€ì› */
      padding-top: env(safe-area-inset-top, 0px);
      padding-bottom: env(safe-area-inset-bottom, 0px);
      padding-left: env(safe-area-inset-left, 0px);
      padding-right: env(safe-area-inset-right, 0px);
    }


    h1 {
      position: fixed;
      top: env(safe-area-inset-top, 0px);
      left: 0;
      right: 0;
      background: white;
      padding: 15px 0;
      font-size: 20px;
      color: #333;
      text-align: center;
      border-bottom: 1px solid #ddd;
      z-index: 1000;
    }


    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
      background-color: white;
    }


    th, td {
      border: 1px solid #ccc;
      padding: 7px;
      text-align: center;
      font-size: 13px;
      width: 35px;
      height: 35px;
    }


    .table-wrapper {
      width: 100%;
      max-width: 90vw;
      padding: 0 2px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex: 1;
      margin: auto 0;
    }
    .h1-button {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      font-size: 13px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
      width: calc(90vw - 20px);
      max-width: 250px;
    }

    .h1-button:hover {
      background-color: #0056b3;
    }

    .button-container {
      position: fixed;
      bottom: calc(15px + env(safe-area-inset-bottom, 0px));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 1000;
      width: 90%;
      max-width: 300px;
      justify-content: center;
    }

    .generate-button {
      padding: 12px 16px;
      font-size: 16px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      flex: 1;
      max-width: 140px;
    }

    .stop-button {
      padding: 12px 16px;
      font-size: 16px;
      background-color: #dc3545;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      flex: 1;
      max-width: 140px;
    }

    .generate-button:hover {
      background-color: #218838;
    }

    .stop-button:hover {
      background-color: #c82333;
    }

    .privacy-text {
      font-size: 8px;
      color: #666;
      text-align: center;
      margin-top:2px;
      cursor: pointer;
    }

    .privacy-text:hover {
      color: #333;
    }
  </style>
</head>
<body>
  
  <div id="results" class="table-wrapper"></div>
  <div class="button-container">
    <button class="generate-button" onclick="generateSets()">RUN</button>
    <button class="stop-button" onclick="stopGeneration()">Stop</button>
  </div>
  <div class="privacy-text" onclick="window.location.href='personal.html'">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</div>
  

  <script>
    let isGenerating = false;
    let shouldStop = false;

    function getRandomFromArray(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }


    function generateFinalNumbers() {
      const totalNumbers = Array.from({ length: 45 }, (_, i) => i + 1);
      let sets = [];


      // 1ì„¸íŠ¸: ê·¸ë£¹ë³„ ì„ íƒ + ë‚˜ë¨¸ì§€ 2ê°œ
      const group1 = [1, 2, 3, 10, 11, 12];
      const group2 = [7, 8, 9, 16, 17, 18];
      const group3 = [28, 29, 30, 37, 38, 39];
      const group4 = [34, 35, 36, 43, 44, 45];
     
      let selected1 = [];
      selected1.push(getRandomFromArray(group1));
      selected1.push(getRandomFromArray(group2));
      selected1.push(getRandomFromArray(group3));
      selected1.push(getRandomFromArray(group4));


      let used = new Set([...group1, ...group2, ...group3, ...group4]);
      let restNumbers = totalNumbers.filter(num => !used.has(num));
      let remainingPool = restNumbers.filter(n => !selected1.includes(n));


      while (selected1.length < 6) {
        let rand = getRandomFromArray(remainingPool);
        if (!selected1.includes(rand)) {
          selected1.push(rand);
        }
      }
      selected1.sort((a, b) => a - b);
      sets.push(selected1);


      // 2ì„¸íŠ¸: 1-45 ë²”ìœ„ì—ì„œ 6ê°œ ë²ˆí˜¸ ëœë¤ ì„ íƒ
      let selected2 = [];
      while (selected2.length < 6) {
        let rand = Math.floor(Math.random() * 45) + 1;
        if (!selected2.includes(rand)) {
          selected2.push(rand);
        }
      }
      selected2.sort((a, b) => a - b);
      sets.push(selected2);


      // 3ì„¸íŠ¸: 1-29 ë²”ìœ„ì—ì„œ 6ê°œ ë²ˆí˜¸
      let set3 = [];
      const range1to29 = Array.from({ length: 29 }, (_, i) => i + 1);
      while (set3.length < 6) {
        let rand = getRandomFromArray(range1to29);
        if (!set3.includes(rand)) {
          set3.push(rand);
        }
      }
      set3.sort((a, b) => a - b);
      sets.push(set3);


      // 4ì„¸íŠ¸: 20-45 ë²”ìœ„ì—ì„œ 6ê°œ ë²ˆí˜¸
      let set4 = [];
      const range20to45 = Array.from({ length: 26 }, (_, i) => i + 20);
      while (set4.length < 6) {
        let rand = getRandomFromArray(range20to45);
        if (!set4.includes(rand)) {
          set4.push(rand);
        }
      }
      set4.sort((a, b) => a - b);
      sets.push(set4);


      // 5ì„¸íŠ¸: 10-30 ë²”ìœ„ì—ì„œ 6ê°œ ë²ˆí˜¸
      let set5 = [];
      const range10to30 = Array.from({ length: 21 }, (_, i) => i + 10);
      while (set5.length < 6) {
        let rand = getRandomFromArray(range10to30);
        if (!set5.includes(rand)) {
          set5.push(rand);
        }
      }
      set5.sort((a, b) => a - b);
      sets.push(set5);


      return sets;
    }


    async function generateSets() {
      if (isGenerating) return; // ì´ë¯¸ ì‹¤í–‰ ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
      
      isGenerating = true;
      shouldStop = false;
      
      while (!shouldStop) {
        const resultDiv = document.getElementById('results');
        resultDiv.innerHTML = '';

        const finalSets = generateFinalNumbers();

        // ëª¨ë“  5ê°œ ì„¸íŠ¸ í‘œì‹œ
        for (let i = 0; i < 5; i++) {
          if (shouldStop) break; // ì¤‘ê°„ì— ì¤‘ë‹¨ ìš”ì²­ì´ ìˆìœ¼ë©´ ì¤‘ë‹¨
          
          let table = document.createElement('table');
          let header = document.createElement('tr');
          let th = document.createElement('th');
          th.colSpan = 6;
          th.textContent = `ì„¸íŠ¸ ${i + 1}`;
          header.appendChild(th);
          table.appendChild(header);

          let row = document.createElement('tr');
          let tds = [];

          for (let j = 0; j < 6; j++) {
            let td = document.createElement('td');
            td.textContent = '';
            row.appendChild(td);
            tds.push(td);
          }

          table.appendChild(row);
          resultDiv.appendChild(table);

          // ë²ˆí˜¸ í•˜ë‚˜ì”© ì²œì²œíˆ ì¶œë ¥
          for (let j = 0; j < 6; j++) {
            if (shouldStop) break; // ì¤‘ê°„ì— ì¤‘ë‹¨ ìš”ì²­ì´ ìˆìœ¼ë©´ ì¤‘ë‹¨
            await animateSlot(tds[j], finalSets[i][j], 800 + j * 200);
          }

          if (!shouldStop) {
            await new Promise(resolve => setTimeout(resolve, 600));
          }
        }
        
        // í•œ ì‚¬ì´í´ ì™„ë£Œ í›„ ì ì‹œ ëŒ€ê¸°
        if (!shouldStop) {
          await new Promise(resolve => setTimeout(resolve, 1000));
        }
      }
      
      isGenerating = false;
    }

    function stopGeneration() {
      shouldStop = true;
    }

    function animateSlot(td, finalNumber, duration) {
      return new Promise(resolve => {
        let count = 0;
        let interval = setInterval(() => {
          td.textContent = Math.floor(Math.random() * 45) + 1;
          count++;
          if (count > duration / 80) { // ğŸ”¹ 80ms ë‹¨ìœ„ë¡œ ë” ëŠë¦¬ê²Œ ë°˜ë³µ
            clearInterval(interval);
            td.textContent = finalNumber;
            resolve();
          }
        }, 200);
      });
    }
  </script>
</body>
</html>
